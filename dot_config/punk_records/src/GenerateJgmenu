#!/usr/bin/env bash

# Retrieve the $rice_path variable with a custom directory name 
# when installing dotfiles using my RiceInstaller script.
source "${HOME}"/.config/bspwm/SystemVars/EnvVars

Menu="$HOME/.config/jgmenu/menu.csv"

if [[ ! -f "$Menu" ]]; then
	touch "$Menu"
	chmod a+rwx "$Menu"

	cat > $Menu << EOF
# This file is autogenerated. Do not edit it directly.
# Instead, edit the `GenerateJgmenu` file inside the rice directory.

Terminal,OpenApps --floating,terminal
Web Browser,OpenApps --browser,internet-web-browser
File Manager,OpenApps --ranger,org.xfce.thunar

^sep()

Favorites,^checkout(favorites),starred

^sep()

Showcase,^checkout(showcase),penguin
Change Theme,^checkout(rices),colors
Select Wallpaper, OpenApps --wallpapers,phototonic

^sep()

Widgets,^checkout(wg),kmenuedit
BSPWM,^checkout(wm),gnome-windows

^sep()

Exit,^checkout(exit),system-shutdown

^tag(favorites)
Visual Studio Code,OpenApps --editor,vscode
Neovide,OpenApps --neovide,nvim
Blender, blender,blender
^sep()
Spotify, spotify, spotify
Discord, discord,discord
OBS,obs,com.obsproject.Studio

^tag(showcase)
Fetch, OpenApps --fetch,$rice_path/assets/kaizokage.svg
Eww, OpenApps --showcase,distributor-logo-archlinux
Cool Terminal, OpenApps --cool-term,cool-retro-term

^tag(rices)
Shaka,echo shaka > $rice_path/.rice ; $rice_path/rices/shaka/Theme.sh,aqualung
Lilith,echo lilith > $rice_path/.rice ; $rice_path/rices/lilith/Theme.sh,application-community
Edison,echo edison > $rice_path/.rice ; $rice_path/rices/edison/Theme.sh,atom
Pythagoras,echo pythagoras > $rice_path/.rice ; $rice_path/rices/pythagoras/Theme.sh,microscope
Atlas,echo atlas > $rice_path/.rice ; $rice_path/rices/atlas/Theme.sh,security-low
York,echo york > $rice_path/.rice ; $rice_path/rices/york/Theme.sh,among-us
Vegapunk,echo vegapunk > $rice_path/.rice ; $rice_path/rices/vegapunk/Theme.sh,alienarena
Kaizokage,echo kaizokage > $rice_path/.rice ; $rice_path/rices/kaizokage/Theme.sh,emblem-dropbox-app

^tag(wg)
User Card,OpenApps --usercard,system-users
Music Player,OpenApps --player,musique
Power Menu,OpenApps --powermenu,changes-allow
Calendar,OpenApps --calendar,office-calendar

^tag(wm)
Keybinds,KeybindingsHelp,preferences-desktop-keyboard-shortcuts
Restart WM,bspc wm -r,system-reboot
Quit,bspc quit,system-log-out

^tag(exit)
Block computer,physlock -d,changes-prevent
Reboot,systemctl reboot,system-reboot
Shutdown,systemctl poweroff,system-shutdown

EOF

fi