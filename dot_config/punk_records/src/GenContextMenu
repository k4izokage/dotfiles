#!/usr/bin/env bash

source "${HOME}"/.config/punk_records/Poneglyph

if [[ ! -f "$jg_menu_file" ]]; then
	touch "$jg_menu_file"
	chmod a+rwx "$jg_menu_file"
fi

change_rice_cmd=""
for i in "${!RICE_NAMES[@]}"; do
	first_cmd="echo '${RICE_NAMES[i]}' > $rice_path/current/.rice"
	second_cmd="ApplyThemeConfig"

	change_rice_cmd+="${RICE_NAMES[i]^}, $first_cmd; $second_cmd,${RICE_ICONS[i]}"$'\n'
done

cat > $jg_menu_file << EOF
# This file is autogenerated. Do not edit it directly.
# Instead, edit the "GenContextMenu" file inside the rice directory.

Terminal,OpenApps --floating,terminal
Web Browser,OpenApps --browser,internet-web-browser
File Manager,OpenApps --ranger,org.xfce.thunar

^sep()

Favorites,^checkout(favorites),starred

^sep()

Showcase,^checkout(showcase),penguin
Change Theme,^checkout(rices),colors
Select Wallpaper, OpenApps --wallpapers,phototonic

^sep()

Widgets,^checkout(wg),kmenuedit
BSPWM,^checkout(wm),gnome-windows

^sep()

Exit,^checkout(exit),system-shutdown

^tag(favorites)
Visual Studio Code,OpenApps --editor,vscode
Neovide,OpenApps --neovide,nvim
Blender, blender,blender
^sep()
Spotify, spotify, spotify
Discord, discord,discord
OBS,obs,com.obsproject.Studio

^tag(showcase)
Fetch, OpenApps --fetch,$rice_path/assets/kaizokage.svg
Eww, OpenApps --showcase,distributor-logo-archlinux
Cool Terminal, OpenApps --cool-term,cool-retro-term

^tag(rices)
$change_rice_cmd

^tag(wg)
User Card,OpenApps --usercard,system-users
Music Player,OpenApps --player,musique
Power Menu,OpenApps --powermenu,changes-allow
Calendar,OpenApps --calendar,office-calendar

^tag(wm)
Keybinds,KeybindingsHelp,preferences-desktop-keyboard-shortcuts
Multi-monitor,xrandr --output eDP-1 --auto --output HDMI-1 --auto --right-of eDP-1,display
Restart WM,bspc wm -r,system-reboot
Quit,bspc quit,system-log-out

^tag(exit)
Block computer,physlock -d,changes-prevent
Reboot,systemctl reboot,system-reboot
Shutdown,systemctl poweroff,system-shutdown

EOF